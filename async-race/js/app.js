(()=>{"use strict";var __webpack_modules__={86:(module,__unused_webpack_exports,__webpack_require__)=>{eval('module.exports = __webpack_require__.p + "assets/flag.png";\n\n//# sourceURL=webpack:///./assets/flag.png?')},56:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack:///./styles/app.scss?")},174:(__unused_webpack_module,exports,__webpack_require__)=>{eval('var __webpack_unused_export__;\n\r\n__webpack_unused_export__ = ({ value: true });\r\n__webpack_require__(56);\r\n__webpack_require__(86);\r\nconst render_1 = __webpack_require__(154);\r\nconst bodyContainer = document.getElementById("app");\r\nif (!bodyContainer)\r\n    throw new Error("no body container");\r\nconst render = new render_1.Render(bodyContainer);\r\n\n\n//# sourceURL=webpack:///./app.ts?')},436:function(__unused_webpack_module,exports){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.drive = exports.stopEngine = exports.startEngine = exports.updateCar = exports.deleteCar = exports.createCar = exports.getCar = exports.GetCars = void 0;\r\nconst BASE = "http://127.0.0.1:3000";\r\nconst urlGarage = `${BASE}/garage`;\r\nconst GetCars = (page, limit) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const response = yield fetch(`${urlGarage}?_page=${page}&_limit=${limit}`);\r\n    const result = yield response.json();\r\n    const count = response.headers.get("X-Total-Count");\r\n    return {\r\n        carArray: result,\r\n        countCars: count,\r\n    };\r\n});\r\nexports.GetCars = GetCars;\r\nconst getCar = (id) => __awaiter(void 0, void 0, void 0, function* () {\r\n    try {\r\n        const response = yield fetch(`${urlGarage}/${id}`);\r\n        const result = yield response.json();\r\n        return result;\r\n    }\r\n    catch (e) {\r\n        throw new Error(`${e}`);\r\n    }\r\n});\r\nexports.getCar = getCar;\r\nconst createCar = (car) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const response = yield fetch(`${urlGarage}`, {\r\n        method: "POST",\r\n        headers: {\r\n            "Content-Type": "application/json",\r\n        },\r\n        body: JSON.stringify(car),\r\n    });\r\n    const result = yield response.json();\r\n    return result;\r\n});\r\nexports.createCar = createCar;\r\nconst deleteCar = (id) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const response = yield fetch(`${urlGarage}/${id}`, {\r\n        method: "DELETE",\r\n    });\r\n    const result = yield response.json();\r\n    return result;\r\n});\r\nexports.deleteCar = deleteCar;\r\nconst updateCar = (id, car) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const response = yield fetch(`${urlGarage}/${id}`, {\r\n        method: "PUT",\r\n        headers: {\r\n            "Content-Type": "application/json",\r\n        },\r\n        body: JSON.stringify(car),\r\n    });\r\n    const result = yield response.json();\r\n    return result;\r\n});\r\nexports.updateCar = updateCar;\r\nconst startEngine = (id) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const response = yield fetch(`${BASE}/engine?id=${id}&status=started`);\r\n    const result = yield response.json();\r\n    return result;\r\n});\r\nexports.startEngine = startEngine;\r\nconst stopEngine = (id) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const response = yield fetch(`${BASE}/engine?id=${id}&status=stopped`);\r\n    const result = yield response.json();\r\n    return result;\r\n});\r\nexports.stopEngine = stopEngine;\r\nconst drive = (id) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const response = yield fetch(`${BASE}/engine?id=${id}&status=drive`).catch();\r\n    if (response.status !== 200) {\r\n        return { success: false };\r\n    }\r\n    const result = yield response.json();\r\n    return result;\r\n});\r\nexports.drive = drive;\r\n\n\n//# sourceURL=webpack:///./js/api/car-api.ts?')},4:function(__unused_webpack_module,exports){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.updateWinner = exports.deleteWinner = exports.createWinner = exports.getWinner = exports.GetWinners = void 0;\r\nconst BASE = "http://127.0.0.1:3000";\r\nconst urlWinners = `${BASE}/winners`;\r\nconst GetWinners = (page, limit, sort, order) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const response = yield fetch(`${urlWinners}?_page=${page}&_limit=${limit}&_sort=${sort}&_order=${order}`);\r\n    const result = yield response.json();\r\n    const count = response.headers.get("X-Total-Count");\r\n    return {\r\n        winnersArray: result,\r\n        countWinners: count,\r\n    };\r\n});\r\nexports.GetWinners = GetWinners;\r\nconst getWinner = (id) => __awaiter(void 0, void 0, void 0, function* () {\r\n    try {\r\n        const response = yield fetch(`${urlWinners}/${id}`);\r\n        const result = yield response.json();\r\n        return result;\r\n    }\r\n    catch (e) {\r\n        throw new Error(`${e}`);\r\n    }\r\n});\r\nexports.getWinner = getWinner;\r\nconst createWinner = (winner) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const response = yield fetch(`${urlWinners}`, {\r\n        method: "POST",\r\n        headers: {\r\n            "Content-Type": "application/json",\r\n        },\r\n        body: JSON.stringify(winner),\r\n    });\r\n    const result = yield response.json();\r\n    return result;\r\n});\r\nexports.createWinner = createWinner;\r\nconst deleteWinner = (id) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const response = yield fetch(`${urlWinners}/${id}`, {\r\n        method: "DELETE",\r\n    });\r\n    const result = yield response.json();\r\n    return result;\r\n});\r\nexports.deleteWinner = deleteWinner;\r\nconst updateWinner = (id, winner) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const response = yield fetch(`${urlWinners}/${id}`, {\r\n        method: "PUT",\r\n        headers: {\r\n            "Content-Type": "application/json",\r\n        },\r\n        body: JSON.stringify(winner),\r\n    });\r\n    const result = yield response.json();\r\n    return result;\r\n});\r\nexports.updateWinner = updateWinner;\r\n\n\n//# sourceURL=webpack:///./js/api/winner-api.ts?')},829:(__unused_webpack_module,exports)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.BaseComponent = void 0;\r\nclass BaseComponent {\r\n    constructor(tag = "div", classes = [], idEl = "") {\r\n        this.element = document.createElement(tag);\r\n        this.element.classList.add(...classes);\r\n        if (idEl) {\r\n            this.element.id = idEl;\r\n        }\r\n    }\r\n}\r\nexports.BaseComponent = BaseComponent;\r\n\n\n//# sourceURL=webpack:///./js/components/base-components.ts?')},805:(__unused_webpack_module,exports)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.Button = void 0;\r\nclass Button {\r\n    constructor(classes = [], type = "submit", spanClass = "", spanText = "") {\r\n        this.classes = classes;\r\n        this.type = type;\r\n        this.spanClass = spanClass;\r\n        this.spanText = spanText;\r\n        this.element = document.createElement("button");\r\n        this.element.classList.add(...this.classes);\r\n        this.element.type = this.type;\r\n        if (this.spanClass.length && this.spanText.length) {\r\n            this.element.insertAdjacentHTML("afterbegin", `<span class=${this.spanClass}>${this.spanText}</span>`);\r\n        }\r\n    }\r\n}\r\nexports.Button = Button;\r\n\n\n//# sourceURL=webpack:///./js/components/buttons/buttons.ts?')},269:function(__unused_webpack_module,exports,__webpack_require__){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.Car = void 0;\r\nconst base_components_1 = __webpack_require__(829);\r\nconst buttons_1 = __webpack_require__(805);\r\nconst template_1 = __webpack_require__(663);\r\nconst utils_1 = __webpack_require__(842);\r\nconst car_api_1 = __webpack_require__(436);\r\nclass Car extends base_components_1.BaseComponent {\r\n    constructor(color) {\r\n        super("div", ["garage__car"]);\r\n        this.color = color;\r\n        this.start = null;\r\n        this.startBtn = new buttons_1.Button(["btn__start"], "button");\r\n        this.stopBtn = new buttons_1.Button(["btn__stop"], "button");\r\n        this.startBtn.element.textContent = "D";\r\n        this.stopBtn.element.textContent = "P";\r\n        this.stopBtn.element.disabled = true;\r\n        this.element.append(this.startBtn.element, this.stopBtn.element);\r\n        this.listenerStartBtn();\r\n        this.listenerStopBtn();\r\n    }\r\n    listenerStartBtn() {\r\n        this.startBtn.element.addEventListener("click", () => {\r\n            this.startDriving(Number(this.carDiv.id));\r\n        });\r\n    }\r\n    listenerStopBtn() {\r\n        this.stopBtn.element.addEventListener("click", () => __awaiter(this, void 0, void 0, function* () {\r\n            this.stopDriving();\r\n        }));\r\n    }\r\n    createCar(id) {\r\n        this.carDiv = document.createElement("div");\r\n        this.carDiv.classList.add("car");\r\n        this.carDiv.id = String(id);\r\n        this.carDiv.insertAdjacentHTML("afterbegin", template_1.carMarkup(this.color));\r\n        this.element.append(this.carDiv);\r\n        return this.carDiv;\r\n    }\r\n    startDriving(id) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.stopBtn.element.disabled = false;\r\n            this.startBtn.element.disabled = true;\r\n            const { velocity, distance } = yield car_api_1.startEngine(id);\r\n            const time = Math.round(distance / velocity);\r\n            const routeCar = utils_1.carRoute(this.carDiv);\r\n            this.moveCar(routeCar, time);\r\n            const { success } = yield car_api_1.drive(Number(id));\r\n            if (!success)\r\n                window.cancelAnimationFrame(this.state);\r\n            return { success, time, id };\r\n        });\r\n    }\r\n    stopDriving() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield car_api_1.stopEngine(Number(this.carDiv.id));\r\n            this.carDiv.style.transform = `translateX(0px)`;\r\n            this.startBtn.element.disabled = false;\r\n            this.stopBtn.element.disabled = true;\r\n            window.cancelAnimationFrame(this.state);\r\n        });\r\n    }\r\n    moveCar(distance, animationTime) {\r\n        this.start = null;\r\n        const step = (timestamp) => {\r\n            if (!this.start)\r\n                this.start = timestamp;\r\n            const time = timestamp - this.start;\r\n            const progress = Math.round(time * (distance / animationTime));\r\n            if (progress < distance) {\r\n                this.carDiv.style.transform = `translateX(${Math.min(progress, distance)}px)`;\r\n                this.state = window.requestAnimationFrame(step);\r\n            }\r\n            else {\r\n                window.cancelAnimationFrame(this.state);\r\n            }\r\n        };\r\n        this.state = window.requestAnimationFrame(step);\r\n        return this.state;\r\n    }\r\n}\r\nexports.Car = Car;\r\n\n\n//# sourceURL=webpack:///./js/components/car/car.ts?')},606:function(__unused_webpack_module,exports,__webpack_require__){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.CarTrack = exports.carsOnPage = void 0;\r\nconst car_api_1 = __webpack_require__(436);\r\nconst winner_api_1 = __webpack_require__(4);\r\nconst generateCar_1 = __webpack_require__(645);\r\nconst utils_1 = __webpack_require__(842);\r\nconst base_components_1 = __webpack_require__(829);\r\nconst buttons_1 = __webpack_require__(805);\r\nconst car_1 = __webpack_require__(269);\r\nexports.carsOnPage = [];\r\nclass CarTrack extends base_components_1.BaseComponent {\r\n    constructor(carName, color, id, track, countCars) {\r\n        super("div", ["garage__track"]);\r\n        this.carName = carName;\r\n        this.color = color;\r\n        this.id = id;\r\n        this.track = track;\r\n        this.countCars = countCars;\r\n        this.wins = 0;\r\n        this.selectBtn = new buttons_1.Button(["garage__select", "btn"], "button", "btn__other", "Select");\r\n        this.removeBtn = new buttons_1.Button(["garage__remove", "btn"], "button", "btn__other", "Remove");\r\n        this.carInstance = new car_1.Car(this.color);\r\n        this.element.append(this.selectBtn.element, this.removeBtn.element, this.createCarName(), this.carInstance.element);\r\n        this.element.insertAdjacentHTML("beforeend", `<img class="flag" src="./assets/flag.png" alt="flag">`);\r\n        this.carInstance.createCar(this.id);\r\n        this.ListenerSelectBtn();\r\n        this.ListenerRemoveBtn();\r\n        this.generateSection = generateCar_1.GenerateCarForm.getInstance();\r\n    }\r\n    createCarName() {\r\n        const span = document.createElement("span");\r\n        span.classList.add("garage__car-name");\r\n        span.textContent = this.carName;\r\n        return span;\r\n    }\r\n    ListenerSelectBtn() {\r\n        this.selectBtn.element.addEventListener("click", () => {\r\n            localStorage.setItem("carID", this.carInstance.carDiv.id);\r\n            this.generateSection.updateCarForm.textInput.element.disabled = false;\r\n            this.generateSection.updateCarForm.textInput.element.value = this.carName;\r\n        });\r\n    }\r\n    ListenerRemoveBtn() {\r\n        this.removeBtn.element.addEventListener("click", () => __awaiter(this, void 0, void 0, function* () {\r\n            yield car_api_1.deleteCar(Number(this.carInstance.carDiv.id));\r\n            yield winner_api_1.deleteWinner(Number(this.carInstance.carDiv.id));\r\n            this.track.innerHTML = "";\r\n            this.garagePage = Number(localStorage.getItem("garagePage"));\r\n            exports.carsOnPage.length = 0;\r\n            car_api_1.GetCars(this.garagePage, utils_1.LIMIT_CARS).then((arrayCars) => {\r\n                localStorage.setItem("carsOnPage", JSON.stringify(arrayCars.carArray));\r\n                this.countCars.textContent = arrayCars.countCars;\r\n                arrayCars.carArray.forEach((car) => {\r\n                    const newCar = new CarTrack(car.name, car.color, car.id, this.track, this.countCars);\r\n                    exports.carsOnPage.push(newCar);\r\n                    this.track.append(newCar.element);\r\n                });\r\n            });\r\n        }));\r\n    }\r\n}\r\nexports.CarTrack = CarTrack;\r\n\n\n//# sourceURL=webpack:///./js/components/car/carTrack.ts?')},679:(__unused_webpack_module,exports,__webpack_require__)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.CarForm = void 0;\r\nconst buttons_1 = __webpack_require__(805);\r\nconst inputs_1 = __webpack_require__(596);\r\nclass CarForm {\r\n    constructor(formClass, textInputName, textInputId, textInputDisabled, colorInputName, colorInputId, btnClass, btnType, spanClass, spanText) {\r\n        this.textInputName = textInputName;\r\n        this.textInputId = textInputId;\r\n        this.textInputDisabled = textInputDisabled;\r\n        this.colorInputName = colorInputName;\r\n        this.colorInputId = colorInputId;\r\n        this.btnClass = btnClass;\r\n        this.btnType = btnType;\r\n        this.spanClass = spanClass;\r\n        this.spanText = spanText;\r\n        this.element = document.createElement("form");\r\n        this.element.classList.add(...formClass);\r\n        this.textInput = new inputs_1.Inputs("text", this.textInputName, this.textInputId, this.textInputDisabled);\r\n        this.colorInput = new inputs_1.Inputs("color", this.colorInputName, this.colorInputId);\r\n        this.btnForm = new buttons_1.Button(this.btnClass, this.btnType, this.spanClass, this.spanText);\r\n        this.element.append(this.textInput.element, this.colorInput.element, this.btnForm.element);\r\n    }\r\n    getInputsValue() {\r\n        this.textInputValue = this.textInput.element.value;\r\n        this.colorInputValue = this.colorInput.element.value;\r\n        return {\r\n            name: this.textInputValue,\r\n            color: this.colorInputValue,\r\n        };\r\n    }\r\n}\r\nexports.CarForm = CarForm;\r\n\n\n//# sourceURL=webpack:///./js/components/forms/carForm.ts?')},596:(__unused_webpack_module,exports)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.Inputs = void 0;\r\nclass Inputs {\r\n    constructor(type, name, id, disabled = false) {\r\n        this.type = type;\r\n        this.name = name;\r\n        this.id = id;\r\n        this.disabled = disabled;\r\n        this.element = document.createElement("input");\r\n        this.element.type = this.type;\r\n        this.element.name = this.name;\r\n        this.element.id = this.id;\r\n        this.element.disabled = this.disabled;\r\n        this.element.required = true;\r\n    }\r\n}\r\nexports.Inputs = Inputs;\r\n\n\n//# sourceURL=webpack:///./js/components/inputs/inputs.ts?')},813:(__unused_webpack_module,exports,__webpack_require__)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.Th = void 0;\r\nconst base_components_1 = __webpack_require__(829);\r\nclass Th extends base_components_1.BaseComponent {\r\n    constructor(classes = [], text) {\r\n        super("th", classes);\r\n        this.text = text;\r\n        this.element.textContent = this.text;\r\n    }\r\n    clearLastchr() {\r\n        var _a, _b, _c;\r\n        const arrows = ["↑", "↓"];\r\n        if (((_a = this.element.textContent) === null || _a === void 0 ? void 0 : _a.slice(-1)) === arrows[0] ||\r\n            ((_b = this.element.textContent) === null || _b === void 0 ? void 0 : _b.slice(-1)) === arrows[1]) {\r\n            this.element.textContent = (_c = this.element.textContent) === null || _c === void 0 ? void 0 : _c.slice(0, -2);\r\n        }\r\n    }\r\n}\r\nexports.Th = Th;\r\n\n\n//# sourceURL=webpack:///./js/components/table/createTh.ts?')},855:(__unused_webpack_module,exports,__webpack_require__)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.CreateTr = void 0;\r\nconst base_components_1 = __webpack_require__(829);\r\nclass CreateTr extends base_components_1.BaseComponent {\r\n    constructor() {\r\n        super("tr");\r\n    }\r\n}\r\nexports.CreateTr = CreateTr;\r\n\n\n//# sourceURL=webpack:///./js/components/table/createTr.ts?')},438:(__unused_webpack_module,exports,__webpack_require__)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.TableWinners = void 0;\r\nconst base_components_1 = __webpack_require__(829);\r\nconst createTh_1 = __webpack_require__(813);\r\nconst createTr_1 = __webpack_require__(855);\r\nclass TableWinners extends base_components_1.BaseComponent {\r\n    constructor() {\r\n        super("table", ["table"]);\r\n        this.createThead();\r\n        this.createTbody();\r\n        this.thId = new createTh_1.Th(["order-by-id"], "Number");\r\n        this.thCar = new createTh_1.Th(["order-by-car"], "Car");\r\n        this.thName = new createTh_1.Th(["order-by-carname"], "Name");\r\n        this.thWins = new createTh_1.Th(["order-by-wins"], "Wins");\r\n        this.thTime = new createTh_1.Th(["order-by-time"], "Best time (seconds)");\r\n        this.tr = new createTr_1.CreateTr();\r\n        this.tr.element.append(this.thId.element, this.thCar.element, this.thName.element, this.thWins.element, this.thTime.element);\r\n        this.tHead.append(this.tr.element);\r\n    }\r\n    createThead() {\r\n        this.tHead = document.createElement("thead");\r\n        this.element.append(this.tHead);\r\n        return this.tHead;\r\n    }\r\n    createTbody() {\r\n        this.tBody = document.createElement("tbody");\r\n        this.element.append(this.tBody);\r\n        return this.tBody;\r\n    }\r\n}\r\nexports.TableWinners = TableWinners;\r\n\n\n//# sourceURL=webpack:///./js/components/table/tableWinners.ts?')},591:function(__unused_webpack_module,exports,__webpack_require__){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.Garage = void 0;\r\nconst car_api_1 = __webpack_require__(436);\r\nconst base_components_1 = __webpack_require__(829);\r\nconst carTrack_1 = __webpack_require__(606);\r\nconst generateCar_1 = __webpack_require__(645);\r\nconst raceSection_1 = __webpack_require__(643);\r\nconst getAllCars_1 = __webpack_require__(82);\r\nconst updateAndCreateWinner_1 = __webpack_require__(216);\r\nconst template_1 = __webpack_require__(663);\r\nconst race_1 = __webpack_require__(987);\r\nconst utils_1 = __webpack_require__(842);\r\nclass Garage extends base_components_1.BaseComponent {\r\n    constructor() {\r\n        super("main", ["main"]);\r\n        this.garagePage = 1;\r\n        this.generateSection = generateCar_1.GenerateCarForm.getInstance();\r\n        this.raceSection = raceSection_1.Race.getInstance();\r\n        this.element.append(this.generateSection.element, this.raceSection.element);\r\n        this.listenerForCreateCar();\r\n        this.listenerForUpdateCar();\r\n        this.listenGenerateCarsBtn();\r\n        this.listenRaceBtn();\r\n        this.listenResetBtn();\r\n    }\r\n    listenerForCreateCar() {\r\n        this.generateSection.createCarForm.element.addEventListener("submit", (evt) => __awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            const inputsValue = this.generateSection.createCarForm.getInputsValue();\r\n            this.generateSection.createCarForm.element.reset();\r\n            yield car_api_1.createCar(inputsValue);\r\n            this.raceSection.removeCars();\r\n            this.raceSection.addCars();\r\n        }));\r\n    }\r\n    listenerForUpdateCar() {\r\n        this.generateSection.updateCarForm.element.addEventListener("submit", (evt) => __awaiter(this, void 0, void 0, function* () {\r\n            evt.preventDefault();\r\n            const inputsValue = this.generateSection.updateCarForm.getInputsValue();\r\n            const idCar = Number(localStorage.getItem("carID"));\r\n            localStorage.removeItem("carID");\r\n            this.generateSection.updateCarForm.element.reset();\r\n            this.generateSection.updateCarForm.textInput.element.disabled = true;\r\n            yield car_api_1.updateCar(idCar, inputsValue);\r\n            this.raceSection.removeCars();\r\n            this.raceSection.addCars();\r\n        }));\r\n    }\r\n    listenGenerateCarsBtn() {\r\n        this.generateSection.generateCarBtn.element.addEventListener("click", () => __awaiter(this, void 0, void 0, function* () {\r\n            yield utils_1.createRandomCars();\r\n            yield utils_1.countAllCars().then((response) => {\r\n                this.raceSection.countCars.textContent = response.count;\r\n            });\r\n            this.raceSection.removeCars();\r\n            getAllCars_1.getAllCars(this.garagePage, this.raceSection.countCars, this.raceSection.track);\r\n        }));\r\n    }\r\n    listenRaceBtn() {\r\n        this.generateSection.raceBtn.element.addEventListener("click", () => __awaiter(this, void 0, void 0, function* () {\r\n            const winner = race_1.race();\r\n            winner.then((x) => __awaiter(this, void 0, void 0, function* () {\r\n                yield updateAndCreateWinner_1.updateAndCreateWinner(x.id, x);\r\n                this.raceSection.element.insertAdjacentHTML("beforeend", template_1.announcWinner(x.carName, x.time));\r\n            }));\r\n        }));\r\n    }\r\n    listenResetBtn() {\r\n        this.generateSection.resetBtn.element.addEventListener("click", () => {\r\n            carTrack_1.carsOnPage.map((x) => x.carInstance.stopDriving());\r\n            this.raceSection.removeAnnounceWinner();\r\n        });\r\n    }\r\n}\r\nexports.Garage = Garage;\r\n\n\n//# sourceURL=webpack:///./js/pages/garage.ts?')},664:function(__unused_webpack_module,exports,__webpack_require__){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.Winners = void 0;\r\nconst base_components_1 = __webpack_require__(829);\r\nconst tableWinners_1 = __webpack_require__(438);\r\nconst counters_1 = __webpack_require__(122);\r\nconst getAllWinners_1 = __webpack_require__(858);\r\nconst template_1 = __webpack_require__(663);\r\nclass Winners extends base_components_1.BaseComponent {\r\n    constructor() {\r\n        super("main", ["main"]);\r\n        this.resArr = [];\r\n        this.element.append(this.createSection());\r\n        this.countWin = new counters_1.Counters("winners__count", "(1)", "Winners ");\r\n        this.countPage = new counters_1.Counters("winners__page", "1", "Page #");\r\n        this.tableWinners = new tableWinners_1.TableWinners();\r\n        this.section.append(this.countWin.counter, this.countPage.counter, this.tableWinners.element);\r\n        this.currPage = localStorage.getItem("winnersPage");\r\n    }\r\n    static getInstance() {\r\n        if (!Winners.instance) {\r\n            Winners.instance = new Winners();\r\n        }\r\n        return Winners.instance;\r\n    }\r\n    createSection() {\r\n        this.section = document.createElement("section");\r\n        this.section.classList.add("winners");\r\n        return this.section;\r\n    }\r\n    createWinners(winnersPage, sortBy, order) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.resArr = [];\r\n            yield getAllWinners_1.createResultArr(winnersPage, sortBy, order).then((arr) => {\r\n                this.countWinners = Number(arr.count);\r\n                arr.resArr.forEach((x) => {\r\n                    this.resArr.push(x);\r\n                });\r\n            });\r\n            return this.resArr;\r\n        });\r\n    }\r\n    renderWinners() {\r\n        return this.resArr\r\n            .map((winner) => `<tr>\n      <td>${winner.id}</td>\n      <td class="winners__car-icon">${template_1.carMarkup(winner.color)}</td>\n      <td>${winner.name}</td>\n      <td>${winner.wins}</td>\n      <td>${winner.time}\'s</td>\n    </tr>`)\r\n            .join("");\r\n    }\r\n    getMarkup() {\r\n        this.currPage = localStorage.getItem("winnersPage");\r\n        this.countWin.counterSpan.textContent = `(${this.countWinners})`;\r\n        this.countPage.counterSpan.textContent = this.currPage;\r\n        this.tableWinners.tBody.innerHTML = "";\r\n        this.tableWinners.tBody.insertAdjacentHTML("afterbegin", this.renderWinners());\r\n    }\r\n    /* eslint-disable no-param-reassign */\r\n    listenerForSortBy(th, innerText, param, order) {\r\n        let temp = order;\r\n        th.addEventListener("click", () => __awaiter(this, void 0, void 0, function* () {\r\n            this.tableWinners.thId.clearLastchr();\r\n            this.tableWinners.thWins.clearLastchr();\r\n            this.tableWinners.thTime.clearLastchr();\r\n            yield this.createWinners(Number(this.currPage), param, temp);\r\n            this.getMarkup();\r\n            if (order === "DESC") {\r\n                order = "ASC";\r\n                th.textContent = `${innerText} ↑`;\r\n            }\r\n            else {\r\n                order = "DESC";\r\n                th.textContent = `${innerText} ↓`;\r\n            }\r\n            temp = order;\r\n        }));\r\n    }\r\n    /* eslint-enable no-param-reassign */\r\n    getTable() {\r\n        this.listenerForSortBy(this.tableWinners.thId.element, "Number", `id`, `DESC`);\r\n        this.listenerForSortBy(this.tableWinners.thWins.element, "Wins", `wins`, `DESC`);\r\n        this.listenerForSortBy(this.tableWinners.thTime.element, "Best time (seconds)", `time`, `DESC`);\r\n    }\r\n}\r\nexports.Winners = Winners;\r\n\n\n//# sourceURL=webpack:///./js/pages/winners.ts?')},154:function(__unused_webpack_module,exports,__webpack_require__){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.Render = void 0;\r\nconst navigate_1 = __webpack_require__(705);\r\nclass Render {\r\n    constructor(rootElement) {\r\n        this.rootElement = rootElement;\r\n        this.fragment = document.createDocumentFragment();\r\n        this.navigate = new navigate_1.Navigate();\r\n        this.renderPage();\r\n        this.listenBtnRenderGarage();\r\n        this.listenBtnRenderWinners();\r\n    }\r\n    renderPage() {\r\n        this.fragment.append(this.navigate.element, this.navigate.currentPage.element, this.navigate.currentPagination.element);\r\n        this.rootElement.append(this.fragment);\r\n    }\r\n    listenBtnRenderGarage() {\r\n        this.navigate.toGarageBtn.element.addEventListener("click", () => {\r\n            this.navigate.winnersPage.element.remove();\r\n            this.navigate.paginationWinners.element.remove();\r\n            this.navigate.currentPage = this.navigate.garagePage;\r\n            this.navigate.currentPagination = this.navigate.paginationGarage;\r\n            this.renderPage();\r\n        });\r\n    }\r\n    listenBtnRenderWinners() {\r\n        this.navigate.toWinnersBtn.element.addEventListener("click", () => __awaiter(this, void 0, void 0, function* () {\r\n            const currPage = localStorage.getItem("winnersPage");\r\n            yield this.navigate.winnersPage.createWinners(Number(currPage), "wins", "DESC");\r\n            this.navigate.winnersPage.getMarkup();\r\n            this.navigate.winnersPage.getTable();\r\n            this.navigate.garagePage.element.remove();\r\n            this.navigate.paginationGarage.element.remove();\r\n            this.navigate.currentPage = this.navigate.winnersPage;\r\n            this.navigate.currentPagination = this.navigate.paginationWinners;\r\n            this.renderPage();\r\n        }));\r\n    }\r\n}\r\nexports.Render = Render;\r\n\n\n//# sourceURL=webpack:///./js/render/render.ts?')},645:(__unused_webpack_module,exports,__webpack_require__)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.GenerateCarForm = void 0;\r\nconst base_components_1 = __webpack_require__(829);\r\nconst buttons_1 = __webpack_require__(805);\r\nconst carForm_1 = __webpack_require__(679);\r\nclass GenerateCarForm extends base_components_1.BaseComponent {\r\n    constructor() {\r\n        super("section", ["generate"]);\r\n        this.createCarForm = new carForm_1.CarForm(["create-car"], "create-car__name", "create-car__name", false, "create-car__color", "create-car__color", ["btn"], "submit", "btn__other", "Create");\r\n        this.updateCarForm = new carForm_1.CarForm(["update-car"], "update-car__name", "update-car__name", true, "update-car__color", "update-car__color", ["btn"], "submit", "btn__other", "Update");\r\n        this.generateCarBtn = new buttons_1.Button(["generate__create-cars", "btn"], "button", "btn__other", "Generate cars");\r\n        this.raceBtn = new buttons_1.Button(["generate__race", "btn"], "button", "btn__other", "Race");\r\n        this.resetBtn = new buttons_1.Button(["generate__reset", "btn"], "button", "btn__reset", "Reset");\r\n        this.createDiv();\r\n        this.element.append(this.createCarForm.element, this.updateCarForm.element, this.generateBtnDiv);\r\n    }\r\n    static getInstance() {\r\n        if (!GenerateCarForm.instance) {\r\n            GenerateCarForm.instance = new GenerateCarForm();\r\n        }\r\n        return GenerateCarForm.instance;\r\n    }\r\n    createDiv() {\r\n        this.generateBtnDiv = document.createElement("div");\r\n        this.generateBtnDiv.classList.add("generate__btns");\r\n        this.generateBtnDiv.append(this.generateCarBtn.element, this.raceBtn.element, this.resetBtn.element);\r\n        return this.generateBtnDiv;\r\n    }\r\n}\r\nexports.GenerateCarForm = GenerateCarForm;\r\n\n\n//# sourceURL=webpack:///./js/sections/generateCar.ts?')},705:(__unused_webpack_module,exports,__webpack_require__)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.Navigate = void 0;\r\nconst base_components_1 = __webpack_require__(829);\r\nconst buttons_1 = __webpack_require__(805);\r\nconst garage_1 = __webpack_require__(591);\r\nconst winners_1 = __webpack_require__(664);\r\nconst pagination_1 = __webpack_require__(52);\r\nclass Navigate extends base_components_1.BaseComponent {\r\n    constructor() {\r\n        super("header", ["navigate"]);\r\n        this.toGarageBtn = new buttons_1.Button(["navigate__garage", "btn", "btn--bold"], "button", "btn__nav", "To garage");\r\n        this.toWinnersBtn = new buttons_1.Button(["navigate__winners", "btn", "btn--bold"], "button", "btn__nav", "To winners");\r\n        this.element.append(this.toGarageBtn.element, this.toWinnersBtn.element);\r\n        this.garagePage = new garage_1.Garage();\r\n        this.winnersPage = winners_1.Winners.getInstance();\r\n        this.paginationGarage = new pagination_1.Pagination("garagePage");\r\n        this.paginationWinners = new pagination_1.Pagination("winnersPage");\r\n        this.currentPage = this.garagePage;\r\n        this.currentPagination = this.paginationGarage;\r\n    }\r\n}\r\nexports.Navigate = Navigate;\r\n\n\n//# sourceURL=webpack:///./js/sections/navigate.ts?')},52:function(__unused_webpack_module,exports,__webpack_require__){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.Pagination = void 0;\r\nconst winner_api_1 = __webpack_require__(4);\r\nconst base_components_1 = __webpack_require__(829);\r\nconst buttons_1 = __webpack_require__(805);\r\nconst winners_1 = __webpack_require__(664);\r\nconst utils_1 = __webpack_require__(842);\r\nconst raceSection_1 = __webpack_require__(643);\r\nclass Pagination extends base_components_1.BaseComponent {\r\n    constructor(page) {\r\n        super("footer", ["pagination"]);\r\n        this.page = page;\r\n        this.prevBtn = new buttons_1.Button(["prev-page", "btn"], "button", "btn__other", "Prev");\r\n        this.nextBtn = new buttons_1.Button(["next-page", "btn"], "button", "btn__other", "Next");\r\n        this.element.append(this.prevBtn.element, this.nextBtn.element);\r\n        this.currentPage = 1;\r\n        this.raceSection = raceSection_1.Race.getInstance();\r\n        this.winnersPage = winners_1.Winners.getInstance();\r\n        this.listenPaginationBtn(this.nextBtn, "next");\r\n        this.listenPaginationBtn(this.prevBtn, "prev");\r\n        localStorage.setItem(`${this.page}`, String(this.currentPage));\r\n        this.checkPage();\r\n    }\r\n    listenPaginationBtn(button, direction) {\r\n        button.element.addEventListener("click", () => __awaiter(this, void 0, void 0, function* () {\r\n            this.directionPagination(direction);\r\n            localStorage.setItem(`${this.page}`, String(this.currentPage));\r\n            if (this.page === "garagePage") {\r\n                this.raceSection.pageNumber.textContent = String(this.currentPage);\r\n                this.raceSection.removeAnnounceWinner();\r\n                this.raceSection.removeCars();\r\n                yield this.raceSection.addCars();\r\n                this.handlerPaginationBtn(this.countCars);\r\n            }\r\n            else {\r\n                yield this.winnersPage.createWinners(this.currentPage, "wins", "DESC");\r\n                this.winnersPage.getMarkup();\r\n                this.handlerPaginationBtn(this.countWinners);\r\n            }\r\n        }));\r\n    }\r\n    directionPagination(direction) {\r\n        if (direction === "next") {\r\n            this.currentPage += 1;\r\n        }\r\n        else if (direction === "prev") {\r\n            this.currentPage -= 1;\r\n        }\r\n        return direction;\r\n    }\r\n    checkPage() {\r\n        if (this.page === "garagePage") {\r\n            utils_1.countAllCars().then((response) => {\r\n                this.countCars = response.count;\r\n                this.handlerPaginationBtn(response.count);\r\n            });\r\n        }\r\n        else {\r\n            winner_api_1.GetWinners(this.currentPage, 10, "wins", "DESC").then((response) => {\r\n                this.countWinners = response.countWinners;\r\n                this.handlerPaginationBtn(response.countWinners);\r\n            });\r\n        }\r\n    }\r\n    // вынести в shared ??\r\n    handlerPaginationBtn(countCars) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.currentPage <= 1) {\r\n                this.prevBtn.element.disabled = true;\r\n            }\r\n            else {\r\n                this.prevBtn.element.disabled = false;\r\n            }\r\n            if (this.currentPage * utils_1.LIMIT_CARS > Number(countCars)) {\r\n                this.nextBtn.element.disabled = true;\r\n            }\r\n            else {\r\n                this.nextBtn.element.disabled = false;\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.Pagination = Pagination;\r\n\n\n//# sourceURL=webpack:///./js/sections/pagination.ts?')},643:function(__unused_webpack_module,exports,__webpack_require__){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.Race = void 0;\r\nconst base_components_1 = __webpack_require__(829);\r\nconst getAllCars_1 = __webpack_require__(82);\r\nconst template_1 = __webpack_require__(663);\r\nclass Race extends base_components_1.BaseComponent {\r\n    constructor() {\r\n        super("section", ["garage"]);\r\n        this.garagePage = 1;\r\n        this.element.insertAdjacentHTML("afterbegin", template_1.currentPage(1));\r\n        this.element.insertAdjacentHTML("afterbegin", template_1.garageTitle(4));\r\n        this.element.append(this.createDiv());\r\n        this.countCars = this.element.querySelector(".count-cars");\r\n        this.pageNumber = this.element.querySelector(".garage__page");\r\n        this.addCars();\r\n    }\r\n    createDiv() {\r\n        this.track = document.createElement("div");\r\n        this.track.classList.add("garage__cars");\r\n        return this.track;\r\n    }\r\n    static getInstance() {\r\n        if (!Race.instance) {\r\n            Race.instance = new Race();\r\n        }\r\n        return Race.instance;\r\n    }\r\n    addCars() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield getAllCars_1.getAllCars(this.garagePage, this.countCars, this.track);\r\n        });\r\n    }\r\n    removeCars() {\r\n        while (this.track.firstChild) {\r\n            this.track.removeChild(this.track.firstChild);\r\n        }\r\n    }\r\n    removeAnnounceWinner() {\r\n        var _a;\r\n        if ((_a = this.element.lastElementChild) === null || _a === void 0 ? void 0 : _a.classList.contains("garage__winners")) {\r\n            this.element.lastElementChild.remove();\r\n        }\r\n    }\r\n}\r\nexports.Race = Race;\r\n\n\n//# sourceURL=webpack:///./js/sections/raceSection.ts?')},122:(__unused_webpack_module,exports)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.Counters = void 0;\r\nclass Counters {\r\n    constructor(mainClass, numberCount, mainText) {\r\n        this.mainClass = mainClass;\r\n        this.numberCount = numberCount;\r\n        this.mainText = mainText;\r\n        this.createCounter(this.mainClass, this.mainText, this.numberCount);\r\n    }\r\n    createCounter(mainClass, text, counter) {\r\n        this.counter = document.createElement("p");\r\n        this.counter.classList.add(mainClass);\r\n        this.counter.textContent = text;\r\n        this.counter.append(this.createCounterSpan(counter));\r\n        return this.counter;\r\n    }\r\n    createCounterSpan(count) {\r\n        this.counterSpan = document.createElement("span");\r\n        this.counterSpan.classList.add("count-main");\r\n        this.counterSpan.textContent = count;\r\n        return this.counterSpan;\r\n    }\r\n}\r\nexports.Counters = Counters;\r\n\n\n//# sourceURL=webpack:///./js/shared/counters.ts?')},82:function(__unused_webpack_module,exports,__webpack_require__){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.getAllCars = void 0;\r\nconst car_api_1 = __webpack_require__(436);\r\nconst carTrack_1 = __webpack_require__(606);\r\nconst utils_1 = __webpack_require__(842);\r\nconst getAllCars = (garagePage, countCars, track) => __awaiter(void 0, void 0, void 0, function* () {\r\n    let numberPage = garagePage;\r\n    numberPage = Number(localStorage.getItem("garagePage"));\r\n    carTrack_1.carsOnPage.length = 0;\r\n    car_api_1.GetCars(numberPage, utils_1.LIMIT_CARS).then((cars) => {\r\n        countCars.textContent = cars.countCars;\r\n        localStorage.setItem("carsOnPage", JSON.stringify(cars.carArray));\r\n        cars.carArray.forEach((car) => {\r\n            const newCar = new carTrack_1.CarTrack(car.name, car.color, car.id, track, countCars);\r\n            carTrack_1.carsOnPage.push(newCar);\r\n            track.append(newCar.element);\r\n        });\r\n    });\r\n});\r\nexports.getAllCars = getAllCars;\r\n\n\n//# sourceURL=webpack:///./js/shared/getAllCars.ts?')},858:function(__unused_webpack_module,exports,__webpack_require__){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.createResultArr = exports.getAllWinners = void 0;\r\nconst car_api_1 = __webpack_require__(436);\r\nconst winner_api_1 = __webpack_require__(4);\r\nconst utils_1 = __webpack_require__(842);\r\nconst getAllWinners = (winnersPage, sortBy, order) => __awaiter(void 0, void 0, void 0, function* () {\r\n    let numberPage = winnersPage;\r\n    numberPage = Number(localStorage.getItem("winnersPage"));\r\n    let allWinnersIds = [];\r\n    let allWinners = [];\r\n    let count = "";\r\n    yield winner_api_1.GetWinners(numberPage, utils_1.LIMIT_WINNERS, sortBy, order).then((winners) => {\r\n        allWinnersIds = winners.winnersArray.map((x) => x.id);\r\n        allWinners = winners.winnersArray;\r\n        count = winners.countWinners;\r\n    });\r\n    const promiseCars = allWinnersIds.map((x) => car_api_1.getCar(x));\r\n    const winnerCars = yield Promise.all(promiseCars);\r\n    return { winnerCars, allWinners, count };\r\n});\r\nexports.getAllWinners = getAllWinners;\r\nconst createResultArr = (winnersPage, sortBy, order) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const resArr = [];\r\n    let count = "";\r\n    yield exports.getAllWinners(winnersPage, sortBy, order).then((elem) => {\r\n        count = elem.count;\r\n        elem.allWinners.forEach((x, i) => {\r\n            resArr.push(Object.assign(x, elem.winnerCars[i]));\r\n        });\r\n    });\r\n    return { resArr, count };\r\n});\r\nexports.createResultArr = createResultArr;\r\n\n\n//# sourceURL=webpack:///./js/shared/getAllWinners.ts?')},216:function(__unused_webpack_module,exports,__webpack_require__){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.updateAndCreateWinner = void 0;\r\nconst winner_api_1 = __webpack_require__(4);\r\nconst updateAndCreateWinner = (id, winner) => __awaiter(void 0, void 0, void 0, function* () {\r\n    let allWinnersIds = [];\r\n    let allWinners = [];\r\n    yield winner_api_1.GetWinners(1, 10, "wins", "ASC").then((winners) => {\r\n        allWinnersIds = winners.winnersArray.map((x) => x.id);\r\n        allWinners = winners.winnersArray;\r\n    });\r\n    const newWinnerId = allWinnersIds.find((winnerId) => winnerId === id);\r\n    if (newWinnerId === id) {\r\n        const newWinner = allWinners.find((x) => x.id === id);\r\n        winner.wins = newWinner.wins + 1;\r\n        winner_api_1.updateWinner(id, { wins: winner.wins, time: winner.time });\r\n    }\r\n    else {\r\n        winner.wins += 1;\r\n        winner_api_1.createWinner({ id: winner.id, wins: winner.wins, time: winner.time });\r\n    }\r\n    return {\r\n        color: winner.color,\r\n        carName: winner.carName,\r\n        wins: winner.wins,\r\n        time: winner.time,\r\n    };\r\n});\r\nexports.updateAndCreateWinner = updateAndCreateWinner;\r\n\n\n//# sourceURL=webpack:///./js/shared/updateAndCreateWinner.ts?')},663:(__unused_webpack_module,exports)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.announcWinner = exports.carMarkup = exports.currentPage = exports.garageTitle = void 0;\r\nconst garageTitle = (count) => {\r\n    return `<p class="garage__title">Garage (<span class="count-cars">${count}</span>)</p>`;\r\n};\r\nexports.garageTitle = garageTitle;\r\nconst currentPage = (count) => {\r\n    return `<p class="garage__pagination">Page #<span class="garage__page">${count}</span></p>`;\r\n};\r\nexports.currentPage = currentPage;\r\nconst carMarkup = (color) => {\r\n    return `<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="170px" height="81px" viewBox="0 0 170 81"\n            preserveAspectRatio="xMidYMid meet">\n            <metadata>Created by potrace 1.15, written by Peter Selinger 2001-2017</metadata>\n            <g transform="translate(0,81) scale(0.013,-0.013)" fill="${color}" stroke="none">\n              <path d="M4535 6089 c-2330 -46 -3596 -185 -3771 -414 -36 -48 -32 -65 16 -65\n                  22 0 40 -4 40 -8 0 -4 -24 -62 -54 -127 -136 -301 -252 -694 -319 -1075 -13\n                  -74 -31 -150 -40 -167 -12 -23 -17 -56 -17 -115 1 -46 -8 -159 -19 -253 -54\n                  -450 -72 -858 -70 -1558 l1 -548 -38 -28 c-61 -44 -212 -210 -236 -261 -17\n                  -34 -22 -64 -23 -121 0 -74 1 -78 45 -143 25 -37 54 -69 65 -71 11 -2 179 -14\n                  374 -26 l354 -22 29 34 c41 49 91 135 121 209 25 64 26 65 66 68 29 2 42 8 46\n                  23 6 18 17 19 212 19 175 0 204 -2 200 -14 -37 -95 -51 -351 -28 -489 16 -96\n                  57 -220 101 -310 112 -225 310 -419 533 -522 587 -271 1276 6 1515 609 36 89\n                  42 100 83 123 160 95 296 247 365 410 l27 64 2096 -3 c1622 -2 2143 0 2306 10\n                  116 7 222 15 236 18 25 5 28 2 49 -68 29 -96 78 -191 140 -274 40 -52 56 -84\n                  71 -142 50 -198 145 -366 289 -512 628 -640 1708 -324 1896 554 32 151 28 348\n                  -9 494 l-14 50 49 4 c47 3 48 3 78 -44 17 -26 66 -77 108 -114 l77 -66 195 6\n                  c200 6 442 24 680 51 256 30 287 40 371 127 66 68 71 85 59 184 -18 145 -46\n                  211 -127 295 -48 51 -104 84 -185 112 -16 6 -18 24 -18 186 0 162 2 183 20\n                  214 87 147 86 562 -1 704 -22 36 -53 50 -73 34 -10 -9 -19 11 -41 97 -95 369\n                  -299 970 -360 1064 l-24 37 73 66 c69 62 75 65 102 55 100 -39 196 86 181 235\n                  -11 106 -69 175 -148 175 -36 0 -47 -6 -78 -38 -20 -21 -42 -57 -49 -79 -17\n                  -56 -15 -157 4 -201 l16 -37 -69 -62 c-37 -35 -70 -63 -73 -63 -6 1 -698 888\n                  -733 940 -13 19 -47 72 -76 118 l-51 82 131 -7 132 -6 -6 38 c-37 230 -572\n                  379 -1687 470 -410 33 -1006 60 -1685 75 -489 11 -2857 11 -3430 -1z m6555\n                  -623 c0 -6 -9 0 -20 14 -26 33 -25 52 0 21 11 -13 20 -28 20 -35z m-272 -545\n                  c133 -277 242 -505 240 -506 -2 -1 -373 -5 -825 -8 l-823 -5 0 509 0 509 523\n                  3 c287 1 549 2 582 2 l59 0 244 -504z m319 157 c121 -194 262 -425 312 -513\n                  l92 -160 -133 -3 c-73 -2 -157 0 -186 3 l-54 7 -249 505 c-137 278 -249 507\n                  -249 509 0 2 55 4 123 4 l124 0 220 -352z m-2938 177 c59 -30 61 -46 61 -450\n                  0 -402 -1 -409 -60 -440 -26 -14 -97 -15 -546 -13 l-516 3 -29 33 -29 32 0\n                  386 c0 253 4 392 11 405 5 11 25 29 42 39 31 19 55 20 535 20 421 0 508 -2\n                  531 -15z m-3469 -414 c0 -249 -4 -430 -10 -445 l-10 -26 -328 0 c-326 0 -329\n                  0 -363 23 -55 37 -58 57 -58 425 -1 369 1 385 61 422 31 19 50 20 371 20 l337\n                  0 0 -419z m1858 399 l32 -20 0 -398 0 -399 -26 -24 -26 -24 -484 -3 c-535 -3\n                  -525 -4 -565 61 -18 31 -19 49 -17 394 l3 361 25 27 c14 15 34 31 45 35 11 5\n                  236 9 500 9 461 1 481 0 513 -19z m5888 -3416 c16 -38 12 -65 -11 -84 -13 -11\n                  -15 -3 -15 54 0 36 2 66 6 66 3 0 12 -16 20 -36z" />\n            </g>\n          </svg>`;\r\n};\r\nexports.carMarkup = carMarkup;\r\nconst announcWinner = (carName, time) => {\r\n    return `<p class="garage__winners">${carName} win in ${time}\'s time</p>`;\r\n};\r\nexports.announcWinner = announcWinner;\r\n\n\n//# sourceURL=webpack:///./js/templates/template.ts?')},674:(__unused_webpack_module,exports)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.carBrands = void 0;\r\nexports.carBrands = [\r\n    "Acura",\r\n    "Alfa Romeo",\r\n    "Audi",\r\n    "BMW",\r\n    "Bentley",\r\n    "Buick",\r\n    "Cadillac",\r\n    "Chevrolet",\r\n    "Chrysler",\r\n    "Dodge",\r\n    "Fiat",\r\n    "Ford",\r\n    "GMC",\r\n    "Genesis",\r\n    "Honda",\r\n    "Hyundai",\r\n    "Infiniti",\r\n    "Jaguar",\r\n    "Jeep",\r\n    "Kia",\r\n    "Land Rover",\r\n    "Lexus",\r\n    "Lincoln",\r\n    "Lotus",\r\n    "Maserati",\r\n    "Mazda",\r\n    "Mercedes",\r\n    "Mercury",\r\n    "Mini",\r\n    "Mitsubishi",\r\n    "Nikola",\r\n    "Nissan",\r\n    "Polestar",\r\n    "Pontiac",\r\n    "Porsche",\r\n    "Ram",\r\n    "Rivian",\r\n    "Rolls-Royce",\r\n    "Saab",\r\n    "Saturn",\r\n    "Scion",\r\n    "Smart",\r\n    "Subaru",\r\n    "Suzuki",\r\n    "Tesla",\r\n    "Toyota",\r\n    "Volkswagen",\r\n    "Volvo",\r\n];\r\n\n\n//# sourceURL=webpack:///./js/utils/carBrands.ts?')},741:(__unused_webpack_module,exports)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.carModels = void 0;\r\nexports.carModels = [\r\n    "NSX",\r\n    "Stelvio",\r\n    "Q7",\r\n    "M3",\r\n    "Bentayga",\r\n    "Lucerne",\r\n    "XT6",\r\n    "Camaro",\r\n    "300",\r\n    "Charger",\r\n    "500L",\r\n    "Mustang",\r\n    "Canyon",\r\n    "G90",\r\n    "Accord",\r\n    "Elantra",\r\n    "Q60",\r\n    "XF",\r\n    "Cherokee",\r\n    "Stinger",\r\n    "Discovery",\r\n    "LX",\r\n    "Aviator",\r\n    "Elis",\r\n    "Ghibli",\r\n    "MX5",\r\n    "AMG",\r\n    "Sable",\r\n    "Cooper",\r\n    "Outlander",\r\n    "Maxima",\r\n    "2",\r\n    "Aztek",\r\n    "Cayman",\r\n    "2500",\r\n    "R1S",\r\n    "7X",\r\n    "Astra",\r\n    "XA",\r\n    "Smart",\r\n    "Impreza",\r\n    "Kizashi",\r\n    "Model S",\r\n    "Camry",\r\n    "Golf",\r\n    "XC90",\r\n];\r\n\n\n//# sourceURL=webpack:///./js/utils/carModels.ts?')},987:function(__unused_webpack_module,exports,__webpack_require__){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.race = exports.driveAll = void 0;\r\nconst carTrack_1 = __webpack_require__(606);\r\nconst driveAll = (promises, ids) => __awaiter(void 0, void 0, void 0, function* () {\r\n    const { success, time, id } = yield Promise.race(promises);\r\n    if (!success) {\r\n        const failId = ids.findIndex((i) => i === id);\r\n        promises.splice(failId, 1);\r\n        ids.splice(failId, 1);\r\n        return exports.driveAll(promises, ids);\r\n    }\r\n    const findWinner = carTrack_1.carsOnPage.find((car) => car.id === id);\r\n    findWinner.time = Number((time / 1000).toFixed(2));\r\n    return findWinner;\r\n});\r\nexports.driveAll = driveAll;\r\nconst race = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    const promises = carTrack_1.carsOnPage.map((x) => x.carInstance.startDriving(x.id));\r\n    const arrIds = carTrack_1.carsOnPage.map((x) => x.id);\r\n    const winner = yield exports.driveAll(promises, arrIds);\r\n    return winner;\r\n});\r\nexports.race = race;\r\n\n\n//# sourceURL=webpack:///./js/utils/race.ts?')},842:function(__unused_webpack_module,exports,__webpack_require__){eval('\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.handlerPaginationBtn = exports.carRoute = exports.countAllCars = exports.LIMIT_WINNERS = exports.LIMIT_CARS = exports.createRandomCars = exports.generateRandomCar = exports.generateRandomName = exports.generateRandomColor = void 0;\r\nconst car_api_1 = __webpack_require__(436);\r\nconst carBrands_1 = __webpack_require__(674);\r\nconst carModels_1 = __webpack_require__(741);\r\nconst TO_16_BIT = 16;\r\nconst generateRandomColor = () => {\r\n    const letters = "0123456789ABCDEF";\r\n    let color = "#";\r\n    for (let i = 0; i < 6; i++) {\r\n        color += letters[Math.floor(Math.random() * TO_16_BIT)];\r\n    }\r\n    return color;\r\n};\r\nexports.generateRandomColor = generateRandomColor;\r\nconst generateRandomName = () => {\r\n    const brand = carBrands_1.carBrands[Math.floor(Math.random() * carBrands_1.carBrands.length)];\r\n    const model = carModels_1.carModels[Math.floor(Math.random() * carModels_1.carModels.length)];\r\n    return `${brand} ${model}`;\r\n};\r\nexports.generateRandomName = generateRandomName;\r\nconst generateRandomCar = (count = 100) => {\r\n    const randomArray = [...Array(count).keys()];\r\n    const newArr = randomArray.map((_) => ({\r\n        name: exports.generateRandomName(),\r\n        color: exports.generateRandomColor(),\r\n    }));\r\n    return newArr;\r\n};\r\nexports.generateRandomCar = generateRandomCar;\r\nconst createRandomCars = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    const randomCars = exports.generateRandomCar();\r\n    const promiseArr = [];\r\n    for (let i = 0; i < randomCars.length; i += 1) {\r\n        promiseArr.push(car_api_1.createCar(randomCars[i]));\r\n    }\r\n    const promise = yield Promise.all(promiseArr);\r\n    return promise;\r\n});\r\nexports.createRandomCars = createRandomCars;\r\nconst BASE_PAGE = 1;\r\nexports.LIMIT_CARS = 7;\r\nexports.LIMIT_WINNERS = 10;\r\nconst countAllCars = () => __awaiter(void 0, void 0, void 0, function* () {\r\n    const { carArray, countCars } = yield car_api_1.GetCars(BASE_PAGE, exports.LIMIT_CARS);\r\n    return {\r\n        items: carArray,\r\n        count: countCars,\r\n    };\r\n});\r\nexports.countAllCars = countAllCars;\r\nconst bodyMargin = 8;\r\nconst carRoute = (car) => {\r\n    return (window.innerWidth -\r\n        car.offsetLeft -\r\n        car.offsetWidth / 2 -\r\n        bodyMargin -\r\n        window.innerWidth * 0.1 -\r\n        60);\r\n};\r\nexports.carRoute = carRoute;\r\nconst handlerPaginationBtn = (numberPage, countCars, nextButton, prevButton) => {\r\n    if (numberPage <= 1) {\r\n        prevButton.element.disabled = true;\r\n    }\r\n    else {\r\n        prevButton.element.disabled = false;\r\n    }\r\n    if (numberPage * exports.LIMIT_CARS > Number(countCars)) {\r\n        nextButton.element.disabled = true;\r\n    }\r\n    else {\r\n        nextButton.element.disabled = false;\r\n    }\r\n};\r\nexports.handlerPaginationBtn = handlerPaginationBtn;\r\n\n\n//# sourceURL=webpack:///./js/utils/utils.ts?')}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var r=__webpack_require__.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var n=r.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e+"../"})();var __webpack_exports__=__webpack_require__(174)})();